<!DOCTYPE html>
<html lang="fr">
	<head>
		<title>HotHotHot project</title>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="autor" content="DERRIVES angèle - GROSJEAN Florian - HAMIDI Inès - HASPEKIAN Yvan"/>
		<meta name="description" content="project HotHotHot"/>
		<meta name="keywords" content="HTML, CSS, javascript, projet, étudiants, aix, aix-en-provence, informatique, iut, dut, stagiaire, web, web dev, développement web, developpement web">
		<meta name="date" content="2022-02-25"/>
		<link id="Style" rel="stylesheet" href="style.css">
        <link rel="manifest" href="manifest.webmanifest">
        <script defer src="app.js"></script>
		<!-- <link rel="icon" href="assets/favicon.ico"/>  -->
		<script src="https://kit.fontawesome.com/4823553caa.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
	</head>

	<body>
		<nav>
        	<aside id="leftNav">
            	<div id="icon"><a href="#debut" onclick="closeLeftNav()" title="accueil"><i class="fas fa-home"></i></a></div>
        	    <div id="icon"><a href="doc.html" onclick="closeLeftNav()" title="documentation"><i class="fa fa-users"></i></a></div>
				<div id="icon"><a href="https://github.com/InesHAMIDI/Projet-JS-HotHotHot" target="_blank" onclick="closeLeftNav()" title="github"><i class="fab fa-github"></i></a></div>
                <br>
			</aside>
    	</nav>
		<button id="enable">Activer les notifications</button>

		<div id="sensors"></div>
        <canvas id="graph"></canvas>

        <script src="scripts/Sensor.js"></script>
        <script src="scripts/SensorData.js"></script>
        <script src="graph.js"></script>
	
		<script>
			/**
			 * partie qui nous sert pour les notifs
			 * tuto : https://developer.mozilla.org/fr/docs/Web/API/Notifications_API/Using_the_Notifications_API
			 */
			
			function askNotificationPermission() {
				function handlePermission(permission) {
					// On affiche ou non le bouton en fonction de la réponse
					if(Notification.permission === 'denied' || Notification.permission === 'default') {
						notificationBtn.style.display = 'block';
					} else {
						notificationBtn.style.display = 'none';
					}
				}

				// on verif si le navigateur prend les notif push
				if (!('Notification' in window)) {
					console.log("Ce navigateur ne prend pas en charge les notifications.");
				} else {
					if(checkNotificationPromise()) {
						Notification.requestPermission()
								.then((permission) => {
									handlePermission(permission);
								})
					} else {
						Notification.requestPermission(function(permission) {
							handlePermission(permission);
						});
					}
				}
			}
			
			function checkNotificationPromise() {
				try {
					Notification.requestPermission().then();
				} catch(e) {
					return false;
				}
				return true;
			}
			
			function createNotification(){
				const img = '/to-do-notifications/img/icon-128.png';
				const text = 'Coucou ! Votre tâche "' + titre + '" arrive maintenant à échéance.';
				const notification = new Notification('Liste de trucs à faire', { body: text, icon: img });

			}

			const n = new Notification('Une super chanson');
			document.addEventListener('visibilitychange', function() {
				if (document.visibilityState === 'visible') {
					// L'onglet est désormais visible et la notification n'est plus pertinente
					// on peut la fermer
					n.close();
				}
			});


		</script>
    </body>
</html>
