// Réupération des données des capteurs par wss ou fetch

var socket = new WebSocket("wss://ws.hothothot.dog:9502");
socket.onopen = function(event)
{
	console.log("Connecté au serveur WSS");

	socket.send("message");
        
	socket.onmessage = function(event)
	{   
		displaySensors(JSON.parse(event.data));
	}
}
socket.onerror = function(event)
{
	console.log("Echec de la connexion au serveur WSS, utilisation de fetch");

	fetch('https://hothothot.dog/api/capteurs').then(function (response)
	{
		return response.json();
	}).then(function (data)
	{
		displaySensors(JSON.parse(data).capteurs);
	}).catch(function (err)
	{
		console.warn('Echec de fetch', err);
	});
}